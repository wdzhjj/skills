## Linux常用命令


#### 常用系统工作命令
		1、echo 命令
			用户在终端输出字符串或变量提取后的值，格式为 "echo [字符串|$变量]"
		2、date 命令
			用于显示及设置系统的时间或日期，格式为 date [选项] [+指定的格式]
			参数以及作用
					%t			跳格Tab
					%H			小时00~23
					%I          小时00~12
					%M			分钟00~59
					%S			秒00~59
					%j			今年中的第几天
			date "+%Y-%m-%d %H:%M:%S"      =>  2018-08-30 14:23:05
			-s     设置系统的当前时间
		3、reboot命令
			用于重启系统
			由于重启计算机这种操作会涉及硬件资源的管理权限，因此默认只能使用root管理员来重启
		4、poweroff命令
			用于关闭系统，默认只能使用root来关闭
		5、wget命令
			用于在终端中下载网络文件，格式为 wget [参数] 下载地址
				-b 后台下载模式
				-P 下载到指定目录
				-t 最大尝试次数
				-c 断电续传
				-p 下载页面内所欲资源，包括图片、视频等
				-r 递归下载
		6、ps命令
			用于查看系统中的进程状态，格式为 ps [参数]
				-a 显示所有集成
				-u 用户以及其他详细信息
				-x 显示没有控制终端的进程
			Linux中有五种常见的进程状态
				* R 运行：进程正在运行或在运行队列中等待
				* S 中断：进程处于休眠中，当某个条件形成后或者接收到信号时，则脱离该状态
				* D 不可中断：进程不响应体统异步信号，即便使用kill也无法将其中断
				* Z 僵死：进程已经终止，但进程描述符依然存在，直到父进程调用wait4()系统函数后将进程释放
				* T 停止：进程收到停止信号后停止运行
		7、top命令
			用于动态地件事进程活动与系统负载等信息，可将它看做动态的强化版的Windows任务管理器
		8、pidof命令
			用于查询某个指定服务进程的PID值，格式为 pidof[参数][服务名称]
			每个进程的进程号码值（PID）是唯一的，因此可以通过PID来区分不同的进程
		9、kill命令
			用于终止某个指定PID的服务进程，格式为 kill[参数][进程PID]
				kill -HUP或者   kill -1 平滑重启
				如Apache重新读取配置文件，但不会踢掉当前用户
				kill -9  强制中止运行程序
		10、killall命令
			用于终止某个指定名称的服务所对应的全部进程，killall [参数] [服务名称]
		11、 pkill
			w命令查询本机已经登录的用户
			pkill -9 -t pts/1
			强制杀死从pts/1虚拟终端登录的进程
				
#### 系统状态检测命令
		1、ifconfig命令
			用于获取网卡配置与网络状态等信息	ifconfig[网络设备][参数]
		2、uname	
			用于查看系统内核与系统版本等信息，	uname [-a]
			-a 参数用来完整的查看当前系统的内核名称，主机名，内核发行版本，节点名，系统时间，硬件名称，硬件平台
			处理器类型和操作系统名称等信息
		3、uptime
			用于查看系统的负载信息
			显示当前的系统时间、系统已运行时间、启用终端数量已经平均负载值等信息
			平均负载值指的是系统在最近1.5.15分钟内的压力情况，负载值越低越好，长期不要超过1，生产最好不超过5
		4、free
			用于显示当前系统中内存的使用量信息
			为了保证Linux系统不会因资源耗尽而突然宕机，运维人员需要时刻关注内存的使用量
		5、who	
			用于查看当前登入主机的用户终端信息
		6、last	
			用于查看所有系统的登录记录 last [参数]
			千万不要单纯以该命令的输出信息而判断系统有无被恶意入侵
		7、history
			用于显示历史执行过的命令 history [-c]
			执行history命令能显示出当前用户在本地计算机中执行过的最近1000条命令记录
			-c 会清空所有命令历史记录
			使用    !编码数字   可以重复执行某一次的命令
			历史命令会被保存到用户家目录中的 .bash_history文件中
		8、sosreport
			用于收集系统配置及架构信息并输出诊断文档
				
				
#### 工作 目录切换命令
		1、pwd
			用于显示用户当前所处的工作目录 pwd[选项]
		2、cd
			切换工作路径
			cd - 	返回到上一次所处的目录
			cd .. 	进入上级目录
			cd ~    返回家目录
			cd ~username 	切换到其他用户家目录
		3、ls	ls[选项][文件]
			用于显示目录中的文件信息
			-a  查看到全部文件 包括隐藏文件
			-l  查看文件的属性、大小等详细信息
			

#### 文本文件编辑命令
		1、cat
			用于查看(较小的)纯文本文件 cat[选项][文件]
			-n  显示行号
		2、more
			查看纯文本文件(较多的) more 选项 文件
			可以使用空格键或者回车键向下翻页
		3、head
			用于查看纯文本文档的前N行  head[选项][文件]
			-n 20  查看前20行
		4、tail
			查看纯文本文档的后N行或持续刷新内容	tail[选项][文件]
			tail -n 20 文件名  查看文档的最后20行
			tail -f 文件名 		查看最新日志文件
		5、tr
			用于替换文本文件中的字符  tr[原始字符][目标字符]
			=>通过管道    cat readme.txt | tr [a-z] [A-Z]  替换成大写
		6、wc
			用于统计文本的行数、字数、字节数	wc[参数][文本]
			-l		只显示行数
			-w		只显示单词数
			-c		只显示字节数
		7、stat
			用于查看文件的具体存储信息和时间等信息	stat 文件名称
		8、cut
			用于按“列”提取文本字符	cut[参数]文本
			-d参数来设置间隔符号   每一项的值采用 ： 来间隔
		9、diff
			用于比较多个文本文件的差异   diff [参数] 文件
			--brief 来确认两个文件是否不同
			-c参数来详细比较出多个文件的差异之处
			
			
#### 文件目录管理命令
		1、touch
			用于创建空白文件或设置文件的时间	touch[选项][文件]
			-a   仅修改 读取时间 atime
			-m   仅修改 修改时间 mtime
			-d   同时修改atime和mtime
		2、mkdir
			用于创建空白的目录   mkdir [选项] 目录
			-p 参数可以递归创建出具有嵌套叠层关系的文件目录
		3、cp
			复制文件或目录 		cp [选项] 源文件 目标文件
			目标  目录：复制到该目录中   普通文件：询问是否覆盖   不存在：正常复制操作
			-p		保留原始文件的属性
			-d		若对象为链接文件，保留此属性
			-r		递归持续复制
			-i		目标存在询问是否覆盖
			-a      相当于-pdr
		4、mv
			用于剪切文件或将文件重命名  	mv [选项]源文件[目标路径][目标文件名]
			不同于复制操作，会默认把源文件删除掉，只保留见切后的文件
			在同一目录中进行剪切操作，相当于重命名
		5、rm
			用于删除文件或目录    rm[选项]文件
			删除时候会被询问   -f强制删除
			-r	删除目录  否则无法删除
		6、dd
			用于按照指定大小和个数的数据块来复制文件和转换文件    dd[参数]
			参数	
				if		输入的文件名称
				of		输出的文件名称
				bs		设置每个块的大小
				count	设置要复制块的个数
			例：
			dd从/dev/zero设备文件中取出一个大小为560MB的数据库，保存成名为560_file的文件
				dd if=/dev/zero of=560_file count=1 bs=560M
			直接使用dd命令来压制出光盘镜像文件，将它变成一个可立即使用的iso镜像
				dd if=/dev/cdrom of=RHEL-server-7.0-x86_64-LinuxProbe.com.iso
		7、file
			用于查看文件的类型	file 文件名
			linux中 文本目录设备统称为文件，不能单凭后缀就知道具体的文件类型=》使用file
			


#### 打包压缩与搜索命令
		1、tar	
			用于对文件进行打包压缩或解压	tar[选项][文件]
				-c			创建压缩文件
				-x			解开压缩文件
				-t			查看压缩包内有哪些文件
				-z			用Gzip压缩或解压缩
				-j			用bzip2压缩或解压缩
				-v			显示压缩或解压缩的过程
				-f			目标文件名
				-p			保留原始的权限和属性
				-P			使用绝对路径来压缩
				-C			指定解压到的目录
			-c 创建和 -x 解压不能同时使用
			用户使用时则是根据文件的后缀来决定应使用何种格式参数进行解压
			某些压缩速度慢，不知道进程时，推荐用-v不断显示解压过程
			-f参数特别重要，它必须放到参数的最后一位，代表要压缩或解压的软件包名称

			一般使用	tar -czvf 压缩包名称.tar.gz 要打包的目录
						tar -xzvf 压缩包名称.tar.gz

		2、grep
			用于在文本中执行关键词搜索，并显示匹配的结果	grep[选项][文件]
			-b		将可执行文件(binary)当做文本文件(text)来搜索
			-c		仅显示找到的行数
			-i		忽略大小写
			-n		显示行号
			-v		反向选择---仅列出没有关键词的行
			
		3、find
			按照指定条件来查找文件	find[查找路径] 寻找条件 操作
			linux中搜索工作一般都是find命令来完成的
			-name		匹配名称
			-perm		匹配权限
			-user		匹配所有者
			-group		匹配所有组
			-mtime -n +n 	匹配修改内容的时间 -n指n天以内 +n指n天以前
			-atime -n +n	匹配访问文件的时间
			-ctime -n +n	匹配修改文件权限的时间
			-nouser 		匹配无所有者的文件
			-nogroup		匹配无所有组的文件
			-newer f1 !f2	匹配比文件f1新但是比f2旧的文件
			--type b/d/c/p/l/f   匹配文件类型 后面的字母依次表示块设备、目录、字符设备、管道、链接文件、文本文件
			-size		匹配文件的大小
			-prune		忽略某个目录
			-exec .....{}\;	后面可跟用于进一步处理搜索结果的命令

			-exec 用于把find命令搜索到的结果交由紧随其后的命令作进一步处理，类似于管道，且由于find命令对参数的特殊要求
					因此虽然exec是长格式，但依然只需要一个减号 -
			例：	find命令搜索出的每一个文件，并且命令的结尾必须是“\;”
				find / -user linuxprobe -exec cp -a {} /root/findresults/ \

				

#### 用户身份和文件权限
		管理员UID为0：系统的管理员用户
		系统用户UID为1~999：Linux系统为了避免因某个服务程序出现漏洞而被黑客提权至整台服务器，
							默认服务程序会有独立的系统用户负责运行，进而有效控制被破坏范围。
		普通用户UID从1000开始：是由管理员创建用于日常工作
		
		useradd：	用于创建新的用户 useradd[选项]用户名
					-d 指定用户的家目录
					-e 账户的到期时间 格式为YYYY-MM-DD
					-u 指定该用于默认的UID
					-g 指定一个初始的用户基本组
					-G 指定一个或多个扩展用户组
					-N 不创建与用户同名的基本用户组
					-s 指定该用户的默认Shell解释器
		groupadd：	用于创建用户组  groupadd[选项]群组名
		usermod：	用于修改用户的属性	usermod[选项]用户名
					-c	填写用户账户的备注信息
					-d -m	参数-m和参数-d连用，可重新指定用户的家目录并自动把旧的数据转移出去
					-e	账户的到期时间
					-g	变更所属用户组
					-G	变更扩展用户组
					-L	锁定用户禁止其登录系统
					-U  解锁用户，允许其登录系统
					-s  变更默认终端
					-u  修改用户的UID
		passwd：	修改用户密码、过期时间、认证信息等	 passwd[选项][用户名]
					-l  锁定用户，禁止其登录
					-u  接触锁定，允许用户登录
					--stdin	 允许通过标准输入修改用户密码
					-d  使该用户可用空密码登录系统
					-e  强制用户在下次登录时修改密码
					-S  显示用户的密码是否被锁定，以及密码所采用的加密算法名称
		userdel：	userdel命令用于删除用户，格式为“userdel [选项] 用户名”		
					-f	强制删除用户
					-r	同时删除用户及用户家目录
		
		文件权限与归属
			-：普通文件。
			d：目录文件。
			l：链接文件。
			b：块设备文件。
			c：字符设备文件。
			p：管道文件。
			
		文件特殊权限
			SUID
				SUID是一种对二进制程序进行设置的特殊权限，可以让二进制程序的执行者临时拥有属主的权限
			SGID
				让执行者临时拥有属组的权限（对拥有执行权限的二进制程序进行设置）
				在某个目录中创建的文件自动继承该目录的用户组（只可以对目录进行设置）
			SBIT	
				特殊权限位
				SBIT特殊权限位可确保用户只能删除自己的文件，而不能删除其他用户的文件，目录中的文件就只能被其所有者执行删除操作

		文件隐藏属性
			chattr
				用于设置文件的隐藏权限  chattr[参数]文件
				i 	无法对文件进行修改；若对目录设置了该参数，则仅能修改其中的子文件内容而不能新建或删除文件
				a   仅允许追加内容，无法覆盖/删除内容
				S	文件内容在变更后立即同步到硬盘sync
				s	彻底从硬盘中删除，不可恢复
				A	不再修改这个文件或目录的最后访问时间
				b   不再修改文件或目录的存取时间
				D	检查压缩文件中的错误
				d   使用dump命令备份时忽略本文件/目录
				c	默认将文件或目录进行压缩
				u	当删除该文件后依然保留其在硬盘中的数据，方便日后恢复
				t	让文件系统支持尾部合并（tail-merging）
				x	可以直接访问压缩文件中的内容
			lsattr	
				lsattr命令用于显示文件的隐藏权限，格式为 lsattr [参数] 文件
				
		访问文件控制列表
			setfacl
				管理文件的ACL规则 setfacl[参数]文件名称
				文件的ACL提供的是在所有者、所属组、其他人的读/写/执行权限之外的特殊权限控制，
				使用setfacl命令可以针对单一用户或用户组、单一文件或目录来进行读/写/执行权限的控制。
				-R 目录文件递归
				-m 普通文件
				-b 删除某个文件的ACL
				
			getfacl 
				用于显示文件上设置的ACL信息 getfacl 文件名称
				
		sudo和su命令		
			su命令
				切换用户身份，使得当前用户在不退出登录的情况下，顺畅地切换到其他用户
				su -     完全切换到新的用户，环境变量也更新为新用户的信息，不保留原始的信息
			sudo命令
				用于给普通用户提供额外权限来完成root管理员才能完成的任务   sudo[参数]命令名称
				-h 	列出帮助信息
				-l  列出当前用户可执行的命令
				-u 用户名或UID值	以指定用户身份执行命令
				-k  清空密码的有效时间，下次执行sudo时需要再次进行密码验证
				-b  在后台执行指定的命令
				-p  更改询问密码的提示语
			
			
			
			
			
#### 系统信息
		arch 显示机器的处理器架构(1) 
		uname -m 显示机器的处理器架构(2) 
		uname -r 显示正在使用的内核版本 
		dmidecode -q 显示硬件系统部件 - (SMBIOS / DMI) 
		hdparm -i /dev/hda 罗列一个磁盘的架构特性 
		hdparm -tT /dev/sda 在磁盘上执行测试性读取操作 
		cat /proc/cpuinfo 显示CPU info的信息 
		cat /proc/interrupts 显示中断 
		cat /proc/meminfo 校验内存使用 
		cat /proc/swaps 显示哪些swap被使用 
		cat /proc/version 显示内核的版本 
		cat /proc/net/dev 显示网络适配器及统计 
		cat /proc/mounts 显示已加载的文件系统 
		lspci -tv 罗列 PCI 设备 
		lsusb -tv 显示 USB 设备 
		date 显示系统日期 
		cal 2007 显示2007年的日历表 
		date 041217002007.00 设置日期和时间 - 月日时分年.秒 
		clock -w 将时间修改保存到 BIOS 





## 管道符、重定向、环境变量
#### 输入输出重定向
			命令<文件名				将文件作为命令的标准输入
			命令<<分界符			从标准输入中读入，知道遇见分界符才停止
			命令<文件1>文件2		将文件1作为命令的标准输入并将标准输出到文件2
			
			命令>文件				将标准输出重定向到一个文件中(清空原有文件的数据)
			命令2>文件				将错误...（清空）
			命令>>文件              将标准输出重定向到一个文件中(追加到原有内容的后面)
			命令>>文件2>&1 或 命令 &>>文件		
									将标准输出与错误共同写入到文件中(追加)
#### 管道命令符
			命令A|命令B
				把前一个命令原本要输出到屏幕的标准正常数据当做是后一个命令的标准输入
				
#### 通配符
			* 		代表0个或多个字符
			? 		代表匹配单个字符
			[]		匹配内部字符

#### 转义字符
			反斜杠 \  		使反斜杠后面的一个变量变为单纯的字符串
			单引号 ''		转义其中所有的变量为单纯的字符串
			双引号 ""		保留其中的变量属性，不进行转义处理
			反引号 ``		把其中的命令执行后返回结果

#### 环境变量
			HOME			用户的主目录
			SHELL			用户在使用的Shell解释器名称			
			HISTSIZE		输出的历史命令记录条数
			HISTFILESIZE	保存的历史命令记录条数
			MAIL			邮件保存路径
			LANG			系统语言，语系名称
			RANDOM			生成一个随机数字
			PS1				Bash解释器的提示符
			PATH			定义解析器搜索用户执行命令的路径
			EDITOR			用户默认的文本编辑器
			
			
#### 将程序放入后台运行
		关闭终端则断开：运行程序后+	&
		关闭终端继续运行
			nohup + 运行程序 + &


#### 扩展
		系统资源查看
			vmstat 命令监控系统资源
				vmstat [刷新延时 刷新次数]
			dmesg
				开机时内核检测信息
				与grep 搭配使用 查询计算机内核自检信息
			free 
				查看内存使用状态
			cat /proc/cpuinfo 
				查看CPU信息
			uname -a-z	
				当前系统内核信息
			file /bin/ls
				判断系统的位数
			lsb_release -a-z	
				查看系统的发行版本
			
#### 挂载
		mount [-t 文件系统] [-o 特殊选项] 设备 文件名 挂载点
		
		-t 文件系统： 加入文件系统类型来指定挂载的类型，可以ext3/ext4/iso9660等文件系统
		-o 特殊选项： 可以指定挂载的额外选项
	
		atime/noatime 更新访问时间/不更新
		async/sync 	  异步/同步，默认为异步
		auto/noauto	   mount -a 命令执行时，是否会自动安装/etc/fstab 文件内容挂载
		defaults	  定义默认值
		exec/noexec	   执行/不执行	设定是否允许在文件系统中执行可执行文件，默认是exec
		remount			重新挂载已经挂载的文件系统，一般用于指定修改特殊权限
		rw/ro			读写/只读  文件系统挂载时，是否具有读写权限 默认rw
		suid/nosuid		具有/不具有SUID权限
		user/nouser		允许/不允许普通用户挂载
		usrquota		写入代表文件系统支持用户磁盘配额，默认不支持
		grpquota							组	磁盘配额，默认不支持



		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
			
			
			
				
				
				
				
				
				
				
				
				
				
				